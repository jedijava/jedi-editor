<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>编辑器</title>
  <script src="https://cdn.bootcss.com/react/16.8.6/umd/react.production.min.js"></script>
  <script src="https://cdn.bootcss.com/react-dom/16.8.6/umd/react-dom.production.min.js"></script>
</head>

<body>
  <div id="jedi-editor"></div>
  <button id="json">获取json</button>
  <button id="text">获取text</button>
  <button id="html">获取html</button>
  <button id="setValue">设置value</button>
</body>
<script type="text/javascript">
  let jsonValue = {
    object: "value",
    document: {
      object: "document",
      nodes: [
        {
          object: "block",
          type: "paragraph",
          nodes: [
            {
              object: "text",
              text: "富文本 ",
              marks: [{ type: "bold" }]
            },
            {
              object: "text",
              text: "编辑器,"
            },
            {
              object: "text",
              text: " 比 "
            },
            {
              object: "text",
              text: "<textarea>",
              marks: [{ type: "code-inline" }]
            },
            {
              object: "text",
              text: "标签实现的更优秀!"
            }
          ]
        },
        {
          object: "block",
          type: "paragraph",
          nodes: [
            {
              object: "text",
              text: "这是一个段落,可以做很多种"
            },
            {
              object: "text",
              text: "样式",
              marks: [{ type: "bold" }]
            },
            {
              object: "text",
              text: "的编辑,比如"
            }
          ]
        },
        {
          object: "block",
          type: "blockquote",
          nodes: [
            {
              object: "text",
              text: '这是"引用"的样式'
            }
          ]
        },
        {
          object: "block",
          type: "paragraph",
          nodes: [
            {
              object: "text",
              text: "斜体",
              marks: [{ type: "italic" }]
            },
            {
              object: "text",
              text: " "
            },
            {
              object: "text",
              text: "下滑线",
              marks: [{ type: "underline" }]
            },
            {
              object: "text",
              text: " "
            },
            {
              object: "text",
              text: "删除线",
              marks: [{ type: "strikethrough" }]
            }
          ]
        },
        {
          object: "block",
          type: "code-block",
          data: {
            language: "js"
          },
          nodes: [
            {
              object: "block",
              type: "code-piece",
              nodes: [
                {
                  object: "text",
                  text: "// A simple FizzBuzz implementation."
                }
              ]
            },
            {
              object: "block",
              type: "code-piece",
              nodes: [
                {
                  object: "text",
                  text: "@anotation"
                }
              ]
            },
            {
              object: "block",
              type: "code-piece",
              nodes: [
                {
                  object: "text",
                  text: "for (var i = 1; i <= 100; i++) {}"
                }
              ]
            }
          ]
        },
        {
          object: "block",
          type: "paragraph",
          nodes: [
            {
              object: "text",
              text: "快来试试"
            }
          ]
        }
      ]
    }
  };
  let jsonValue2 = {
    object: "value",
    document: {
      object: "document",
      nodes: [
        {
          object: "block",
          type: "paragraph",
          nodes: [
            {
              object: "text",
              text: "哒哒哒",
              marks: [{ type: "bold" }]
            }]
        }]
    }
  }

  const editor = new JediEditor({
    selector: "#jedi-editor",
    value: jsonValue
  });
  document.getElementById("json").addEventListener(
    "click",
    function () {
      console.log(JSON.stringify(editor.value.json()));
    },
    false
  );
  document.getElementById("text").addEventListener(
    "click",
    function () {
      console.log(editor.value.text());
    },
    false
  );

  document.getElementById("html").addEventListener(
    "click",
    function () {
      console.log(editor.value.html());
    },
    false
  );

  document.getElementById("setValue").addEventListener(
    "click",
    function () {
      console.log(editor.value.json(jsonValue2));
    },
    false
  );

  editor.on("change", v => {
    console.log("你变了", v);
  });
</script>

</html>